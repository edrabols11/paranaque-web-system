# Archive System - Quick Reference Guide

## ğŸ¯ What is the Archive System?

The Archive system allows librarians to remove books from active circulation while preserving their records. This is useful for:
- Books that are damaged or outdated
- Books being temporarily removed from the collection
- Maintaining a history of all books that were ever in the library

## ğŸ”„ Archive Workflow

### How Books Flow Through the System

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    NEW BOOK ADDED                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚   ACTIVE BOOKS        â”‚
           â”‚   (ALL BOOKS Tab)     â”‚
           â”‚   - Can borrow        â”‚
           â”‚   - Can reserve       â”‚
           â”‚   - Visible to users  â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ ARCHIVE Button  â”‚
              â”‚ Clicked         â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚  ARCHIVED BOOKS       â”‚
           â”‚  (ARCHIVE Tab)        â”‚
           â”‚  - Cannot borrow      â”‚
           â”‚  - Hidden from users  â”‚
           â”‚  - Full records kept  â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Two Options:   â”‚
              â”‚ 1. Return       â”‚
              â”‚ 2. Delete       â”‚
              â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                   â”‚       â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                            â”‚
         â–¼                            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   RETURN    â”‚          â”‚   DELETE     â”‚
    â”‚   TO STOCK  â”‚          â”‚ PERMANENTLY  â”‚
    â”‚     Back    â”‚          â”‚  Gone from   â”‚
    â”‚     to      â”‚          â”‚  Database    â”‚
    â”‚   Active    â”‚          â”‚              â”‚
    â”‚   Books     â”‚          â”‚   âš ï¸  Cannot  â”‚
    â”‚             â”‚          â”‚   undo!      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“± How to Use Archive in Admin Dashboard

### Archiving a Book (ARCHIVE BUTTON)

**Step 1:** Go to Admin Dashboard
```
ğŸ  Home â†’ Click on Admin Dashboard (icon in sidebar)
```

**Step 2:** Navigate to Resources
```
ğŸ  Admin Dashboard
â”œâ”€ Click "Resources" in left menu
â””â”€ You'll see sub-menu: All Books | Archive Books | Borrowed Books | etc.
```

**Step 3:** Archive a Book
```
1. Click "All Books" tab
2. Find the book you want to archive
3. Scroll right to see "Actions" column
4. Click "Archive" button (yellow/gold color)
5. Confirm: "Are you sure you want to archive this book?"
6. Click "Yes"
7. âœ… Book is now archived!
```

### Viewing Archived Books (ARCHIVE BOOKS TAB)

**Step 1:** Go to Resources
```
ğŸ  Admin Dashboard
â”œâ”€ Click "Resources" in left menu
â””â”€ You'll see: All Books | Archive Books | Borrowed Books | etc.
```

**Step 2:** Click Archive Books Tab
```
You'll see:
- List of all archived books
- Total count at top
- Search box to find books
- Each book shows: Title | Year | Category | Image | Actions
```

### Returning Archived Book to Active Stock (RETURN BUTTON)

**Step 1:** Open Archive Books tab
```
ğŸ  Admin Dashboard â†’ Resources â†’ Archive Books
```

**Step 2:** Find the book to restore
```
Use search box to find by title if needed
```

**Step 3:** Click Return Button
```
1. Click blue "â†©ï¸ Return" button on the right
2. Confirm: "Are you sure you want to return this book to stocks?"
3. Click "Yes"
4. âœ… Book moves back to "All Books" tab
```

### Permanently Deleting Archived Book (DELETE BUTTON)

**Step 1:** Open Archive Books tab
```
ğŸ  Admin Dashboard â†’ Resources â†’ Archive Books
```

**Step 2:** Find the book to delete
```
Use search box to find by title if needed
```

**Step 3:** Click Delete Button
```
1. Click red "ğŸ—‘ï¸ Delete" button on the right
2. Confirm: "Are you sure you want to permanently delete this book?"
3. Click "Yes"
4. âš ï¸ Book is permanently deleted! Cannot undo!
```

## ğŸ—„ï¸ Database Structure

### Two Separate Collections

**BOOKS Collection** (Active Books)
```
{
  _id: ObjectId,
  title: "Book Title",
  year: 2023,
  category: "Fiction",
  author: "Author Name",
  status: "available",
  borrowedBy: null,
  reservedBy: null,
  stock: 5,
  availableStock: 3,
  image: "image-url.jpg",
  accessionNumber: "2026-0001",
  createdAt: "2026-01-13T16:55:22Z"
}
```

**ARCHIVED_BOOKS Collection** (Archived Books)
```
{
  _id: ObjectId,
  title: "Book Title",
  year: 2023,
  category: "Fiction",
  author: "Author Name",
  status: "Archived",
  originalBookId: ObjectId (reference),
  image: "image-url.jpg",
  accessionNumber: "2026-0001",
  archivedAt: "2026-01-14T10:30:00Z",  â† When archived
  createdAt: "2026-01-13T16:55:22Z"
}
```

## âš™ï¸ API Reference

### For Developers/Admins Using API

```bash
# 1. Archive a book
PUT /api/books/archive/:bookId
Content-Type: application/json
{
  "status": "Archived"
}
Response: 200 OK
{
  "message": "Book archived successfully",
  "archivedBook": { ... }
}

# 2. Get all archived books
GET /api/books/archived/all
Response: 200 OK
{
  "books": [ ... ]
}

# 3. Return archived book to stock
PUT /api/books/archived/return/:bookId
Response: 200 OK
{
  "message": "Book returned to stocks!",
  "book": { ... }
}

# 4. Permanently delete archived book
DELETE /api/books/archived/:bookId
Response: 200 OK
{
  "message": "Archived book deleted successfully",
  "deletedBook": { _id, title }
}
```

## ğŸ›¡ï¸ Safety Features

### What Gets Preserved
âœ… Original book title
âœ… Author, publisher, year
âœ… Library accession number
âœ… Classification/call number
âœ… Location information
âœ… Archive timestamp
âœ… Original book ID (for reference)

### What Gets Removed
âŒ Book is removed from active circulation
âŒ Book is hidden from users
âŒ Book cannot be borrowed or reserved
âŒ Book is no longer in "All Books" list

## âš ï¸ Important Notes

### Before Archiving
- Make sure book isn't currently borrowed by someone
- Consider returning it first if needed
- Book record will be preserved

### Before Deleting
- **This cannot be undone!**
- Only delete if you're sure the book should be completely removed
- Archived record will be permanently deleted
- Consider keeping in archive instead

## ğŸ” Troubleshooting

| Issue | Solution |
|-------|----------|
| Can't find Archive button | Scroll right in All Books table |
| Archive button doesn't work | Clear browser cache (Ctrl+F5) |
| Book still visible after archive | Refresh page (F5) |
| Can't return book from archive | Book may have validation issues |
| Delete button missing | Book may be locked |

## ğŸ“Š Data Flow Summary

```
User Archives Book
        â†“
    âœ… Validation
        â”œâ”€ Title not empty?
        â”œâ”€ Year valid (1000-2050)?
        â”œâ”€ Category/Genre present?
        â””â”€ All OK? Continue...
        â†“
 Book moved to Archive
        â”œâ”€ Saved as ArchivedBook
        â”œâ”€ Deleted from Books collection
        â””â”€ Logged in system
        â†“
 Available in Archive View
        â”œâ”€ Can be returned to stock
        â””â”€ Can be permanently deleted
```

## âœ… Validation Rules

Books can only be archived if they have:
1. âœ… A title (not empty)
2. âœ… A valid year (between 1000 and current year + 50)
3. âœ… A category or genre

If validation fails, you'll get an error message explaining what's wrong.

---

**Last Updated:** January 14, 2026
**Version:** 1.0
**Status:** âœ… Ready to Use
